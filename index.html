<!doctype html>
<meta charset="utf-8" />
<title>Deps Viewer — Force Graph</title>
<style>
  :root { --bg:#0b0e12; --panel:#12161d; --text:#d8dee9; --muted:#9aa4b2; }
  html, body { height:100%; margin:0; background:var(--bg); color:var(--text); font:13px/1.4 system-ui, Segoe UI, Roboto, sans-serif; }
  #app { display:grid; grid-template-columns: 320px 1fr; height:100%; }
  #panel { background:var(--panel); border-right:1px solid #1e2530; padding:12px 14px; overflow:auto; }
  #panel h1 { margin:4px 0 8px; font-size:14px; font-weight:600; }
  #panel .muted { color:var(--muted); }
  #panel pre { white-space:pre-wrap; word-break:break-word; background:#0f1319; border:1px solid #1b222e; padding:8px; border-radius:6px; overflow:auto;}
  #controls { display:grid; gap:8px; margin-bottom:10px; }
  #controls label { display:block; font-weight:600; margin-bottom:4px; }
  #controls select, #controls input { width:100%; background:#0f1319; color:var(--text); border:1px solid #1b222e; border-radius:6px; padding:6px; }
  #legend, #legendKinds { display:grid; grid-template-columns: auto 1fr; gap:8px 8px; align-items:center; margin:8px 0 0; }
  #legend .row, #legendKinds .row { display:contents; opacity:0.95; }
  #legend input[type="checkbox"] { width:14px; height:14px; margin:0; }
  #legend label, #legendKinds label { display:flex; align-items:center; gap:8px; user-select:none; }
  .swatch { width:14px; height:14px; border-radius:3px; display:inline-block; }
  .disabled { opacity:0.35; }

  svg { width:100%; height:100%; display:block; touch-action: none; }
  .link { stroke-opacity:.28; vector-effect: non-scaling-stroke; pointer-events: none; } /* color set in JS */
  .link.highlight { stroke-opacity:.95; }
  .node { cursor:grab; }
  .node:hover { stroke:#fff; stroke-width:1.5px; }
  .label { pointer-events:none; font-size:10px; fill:#cbd5e1; text-shadow: 0 1px 2px #000; opacity:.85 }

  /* info card */
  .info-card { background:#0f1319; border:1px solid #1b222e; border-radius:8px; padding:10px; margin-top:8px; }
  .info-title { font-weight:700; font-size:14px; margin:0 0 4px; }
  .row { display:flex; gap:6px; flex-wrap:wrap; align-items:center; }
  .badge { font-size:11px; padding:2px 6px; border-radius:999px; border:1px solid #2a3140; background:#0d1218; color:#dbe3ef; }
  .chip { font-size:11px; padding:2px 6px; border-radius:5px; border:1px solid #2a3140; background:#0d1218; color:#cfd8e3; }
  .kv { color:#aab4c3; }
  .counts { display:grid; grid-template-columns: auto auto; gap:6px 12px; margin-top:6px; }
  .dot { width:10px; height:10px; border-radius:50%; display:inline-block; margin-right:6px; }
</style>

<div id="app">
  <aside id="panel">
    <h1>Dependency Graph</h1>

    <div id="controls">
      <div>
        <label for="edgeType">Edge type</label>
        <select id="edgeType">
          <option>all</option>
          <option>call</option>
          <option>use</option>
          <option>module-procedure-of</option>
          <option>binds-to</option>
          <option>uses-type</option>
        </select>
      </div>

      <div>
        <label for="filter">Filter (contains)</label>
        <input id="filter" placeholder="type a substring e.g. stella" />
      </div>

      <div>
        <label><input type="checkbox" id="labels" checked> Show labels</label>
      </div>
    </div>

    <div class="muted">Toggle edge types (active only when “all” is selected):</div>
    <div id="legend"></div>

    <div class="muted" style="margin-top:10px">Node kinds:</div>
    <div id="legendKinds"></div>

    <div class="muted" style="margin-top:10px">Hover a node to see details (click to pin)</div>
    <div id="info" class="info-card"></div>
  </aside>

  <svg id="viz"></svg>
</div>

<script type="module" src="./bundle.js"></script>

